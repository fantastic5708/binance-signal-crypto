<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sinyal Trading Futures Binance - Profesional</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #1e3c72, #2a5298); color: #fff; }
        h1 { text-align: center; color: #ffd700; margin-bottom: 20px; }
        p { text-align: center; margin-bottom: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
        select, button { margin: 10px; padding: 10px; border: none; border-radius: 5px; font-size: 16px; }
        button { background: #28a745; color: white; cursor: pointer; transition: background 0.3s; }
        button:hover { background: #218838; }
        .signal { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; padding: 20px; border-radius: 10px; animation: fadeIn 0.5s; }
        .bullish { background: linear-gradient(135deg, #4caf50, #81c784); }
        .bearish { background: linear-gradient(135deg, #f44336, #ef5350); }
        .signal h3 { grid-column: span 2; text-align: center; color: #fff; }
        .probability { font-weight: bold; font-size: 18px; color: #ffd700; }
        .recommended { color: #ffeb3b; font-style: italic; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sinyal Trading Futures Binance - Profesional</h1>
        <p>Pilih simbol futures dari dropdown, lalu klik "Dapatkan Sinyal". Analisis akurat dengan rasio TP:SL 1:2.</p>
        
        <!-- Dropdown simbol -->
        <label for="symbolSelect">Pilih Simbol Futures:</label>
        <select id="symbolSelect">
            <option value="BTCUSDT">BTCUSDT</option>
            <option value="ETHUSDT">ETHUSDT</option>
            <option value="ADAUSDT">ADAUSDT</option>
            <option value="BNBUSDT">BNBUSDT</option>
            <option value="SOLUSDT">SOLUSDT</option>
            <option value="DOTUSDT">DOTUSDT</option>
            <option value="LTCUSDT">LTCUSDT</option>
            <option value="XRPUSDT">XRPUSDT</option>
            <option value="LINKUSDT">LINKUSDT</option>
            <option value="AVAXUSDT">AVAXUSDT</option>
            <option value="MATICUSDT">MATICUSDT</option>
            <option value="DOGEUSDT">DOGEUSDT</option>
            <option value="SHIBUSDT">SHIBUSDT</option>
            <option value="UNIUSDT">UNIUSDT</option>
            <option value="SUSHIUSDT">SUSHIUSDT</option>
            <option value="CAKEUSDT">CAKEUSDT</option>
            <option value="ICPUSDT">ICPUSDT</option>
            <option value="FILUSDT">FILUSDT</option>
            <option value="VETUSDT">VETUSDT</option>
            <option value="TRXUSDT">TRXUSDT</option>
            <option value="ALGOUSDT">ALGOUSDT</option>
            <option value="ETCUSDT">ETCUSDT</option>
            <option value="XLMUSDT">XLMUSDT</option>
            <option value="THETAUSDT">THETAUSDT</option>
            <option value="FTMUSDT">FTMUSDT</option>
            <option value="NEARUSDT">NEARUSDT</option>
            <option value="FLOWUSDT">FLOWUSDT</option>
            <option value="CHZUSDT">CHZUSDT</option>
            <option value="ENJUSDT">ENJUSDT</option>
            <option value="MANAUSDT">MANAUSDT</option>
            <option value="SANDUSDT">SANDUSDT</option>
            <option value="AXSUSDT">AXSUSDT</option>
            <option value="GALAUSDT">GALAUSDT</option>
            <option value="APEUSDT">APEUSDT</option>
            <option value="OPUSDT">OPUSDT</option>
            <option value="LDOUSDT">LDOUSDT</option>
            <option value="ARBUSDT">ARBUSDT</option>
            <option value="PEPEUSDT">PEPEUSDT</option>
            <option value="ONDOUSDT">ONDOUSDT</option>
            <option value="TIAUSDT">TIAUSDT</option>
            <option value="WLDUSDT">WLDUSDT</option>
            <option value="MEMEUSDT">MEMEUSDT</option>
            <option value="BONKUSDT">BONKUSDT</option>
            <option value="JUPUSDT">JUPUSDT</option>
            <option value="PYTHUSDT">PYTHUSDT</option>
            <option value="WIFUSDT">WIFUSDT</option>
            <option value="MEWUSDT">MEWUSDT</option>
            <option value="BOMEUSDT">BOMEUSDT</option>
            <option value="EOSUSDT">EOSUSDT</option>
            <option value="IOTAUSDT">IOTAUSDT</option>
            <option value="ZECUSDT">ZECUSDT</option>
            <option value="DASHUSDT">DASHUSDT</option>
            <option value="XMRUSDT">XMRUSDT</option>
            <option value="BTGUSDT">BTGUSDT</option>
            <option value="QTUMUSDT">QTUMUSDT</option>
            <option value="OMGUSDT">OMGUSDT</option>
            <option value="LSKUSDT">LSKUSDT</option>
            <option value="WAVESUSDT">WAVESUSDT</option>
            <option value="STRATUSDT">STRATUSDT</option>
            <option value="GNTUSDT">GNTUSDT</option>
            <option value="REPUSDT">REPUSDT</option>
            <option value="BATUSDT">BATUSDT</option>
            <option value="ZRXUSDT">ZRXUSDT</option>
        </select>
        
        <button onclick="getSignal()">Dapatkan Sinyal</button>
        <div id="result"></div>
    </div>

    <script>
        async function getFuturesKlines(symbol) {
            const url = `https://fapi.binance.com/fapi/v1/klines?symbol=${symbol}&interval=1h&limit=100`;
            const response = await fetch(url);
            if (!response.ok) throw new Error(`Simbol ${symbol} tidak ditemukan atau error API. Coba simbol lain.`);
            const data = await response.json();
            if (data.length === 0) throw new Error('Data harga tidak tersedia untuk simbol ini.');
            return data.map(k => ({
                timestamp: new Date(k[0]),
                open: parseFloat(k[1]),
                high: parseFloat(k[2]),
                low: parseFloat(k[3]),
                close: parseFloat(k[4]),
                volume: parseFloat(k[5])
            }));
        }

        function analyzeSymbol(klines, symbol) {
            const closes = klines.map(k => k.close);
            const highs = klines.map(k => k.high);
            const lows = klines.map(k => k.low);
            const volumes = klines.map(k => k.volume);
            if (closes.length < 50) throw new Error('Data tidak cukup untuk analisis.');
            
            // SMA20, EMA50, EMA200
            const sma20 = closes.slice(-20).reduce((a, b) => a + b, 0) / 20;
            const ema50 = closes.slice(-50).reduce((a, b) => a + b, 0) / 50;
            const ema200 = closes.slice(-200).reduce((a, b) => a + b, 0) / 200;
            
            // RSI
            const gains = closes.slice(1).map((c, i) => c > closes[i] ? c - closes[i] : 0);
            const losses = closes.slice(1).map((c, i) => c < closes[i] ? closes[i] - c : 0);
            const avgGain = gains.reduce((a, b) => a + b, 0) / gains.length;
            const avgLoss = losses.reduce((a, b) => a + b, 0) / losses.length;
            const rsi = avgLoss === 0 ? 100 : 100 - (100 / (1 + avgGain / avgLoss));
            
            // MACD
            const ema12 = closes.slice(-12).reduce((a, b) => a + b, 0) / 12;
            const ema26 = closes.slice(-26).reduce((a, b) => a + b, 0) / 26;
            const macd = ema12 - ema26;
            
            // Stochastic Oscillator
            const highestHigh = Math.max(...highs.slice(-14));
            const lowestLow = Math.min(...lows.slice(-14));
            const latestClose = closes[closes.length - 1];
            const stochastic = ((latestClose - lowestLow) / (highestHigh - lowestLow)) * 100;
            
            // ATR (Average True Range)
            const trs = closes.map((c, i) => {
                if (i === 0) return highs[i] - lows[i];
                return Math.max(highs[i] - lows[i], Math.abs(highs[i] - closes[i-1]), Math.abs(lows[i] - closes[i-1]));
            });
            const atr = trs.reduce((a, b) => a + b, 0) / trs.length;
            
            // Bollinger Bands
            const stdDev = Math.sqrt(closes.slice(-20).reduce((a, b) => a + (b - sma20)**2, 0) / 20);
            const bbUpper = sma20 + stdDev * 2;
            const bbLower = sma20 - stdDev * 2;
            
            // Volatilitas
            const volatility = closes.reduce((a, b, i, arr) => i > 0 ? a + Math.abs((b - arr[i-1]) / arr[i-1]) : a, 0) / closes.length * 100;
            const avgVolume = volumes.reduce((a, b) => a + b, 0) / volumes.length;
            const volumeStrength = volumes.slice(-10).reduce((a, b) => a + b, 0) / 10 > avgVolume ? 1 : 0;
            
            const latest = klines[klines.length - 1];
            const direction = ema50 > sma20 && rsi > 50 ? "Bullish" : "Bearish";
            const entryDirection = direction === "Bullish" ? "Long (Beli)" : "Short (Jual)";
            const entryPrice = latest.close;
            
            // Hitung distance SL berdasarkan ATR dan volatilitas (risiko 1 bagian)
            const riskDistance = Math.max(atr * 1.5, volatility / 100 * entryPrice * 0.02); // Minimal 2% dari harga
            
            // TP:SL 1:2 (reward 2x risk)
            let sl, tp;
            if (direction === "Bullish") {
                sl = entryPrice - riskDistance;
                tp = entryPrice + (2 * riskDistance);
            } else {
                sl = entryPrice + riskDistance;
                tp = entryPrice - (2 * riskDistance);
            }
            
            const distance = Math.abs(entryPrice - tp) / entryPrice * 100;
            const estimatedHours = distance / (volatility / 10) || 999;
            const estimatedTime = estimatedHours < 24 ? `${estimatedHours.toFixed(1)} jam` : "Lebih dari 1 hari";
            
            // Leverage saran
            let recommendedLeverage = 5;
            if (direction === "Bullish" && volatility < 5) recommendedLeverage = 10;
            else if (direction === "Bearish" || volatility > 10) recommendedLeverage = 2;
            if (symbol.includes('BTC') || symbol.includes('ETH')) recommendedLeverage += 5;
            
            // Probabilitas tinggi (skor dari 10 indikator)
            let score = 0;
            if (rsi > 70 || rsi < 30) score += 15;
            if (ema50 > sma20 && ema50 > ema200) score += 15;
            if (macd > 0) score += 10;
            if (stochastic > 80 || stochastic < 20) score += 10;
            if (atr < volatility / 2) score += 10;
            if (volumeStrength) score += 10;
            if (direction === "Bullish" && latest.close > sma20) score += 10;
            if (direction === "Bearish" && latest.close < sma20) score += 10;
            if (ema200 > sma20) score += 5;
            const probability = Math.min(score + 40, 98);
            
            // Label disarankan
            const isRecommended = probability > 85;
            
            return {
                symbol,
                currentPrice: latest.close,
                direction,
                entryDirection,
                tp,
                sl,
                estimatedTime,
                recommendedLeverage,
                probability,
                isRecommended
            };
        }

        async function getSignal() {
            const symbol = document.getElementById('symbolSelect').value;
            if (!symbol) {
                document.getElementById('result').innerHTML = '<p style="color: red;">Pilih simbol dulu!</p>';
                return;
            }
            document.getElementById('result').innerHTML = '<p>Loading...</p>';
            try {
                const klines = await getFuturesKlines(symbol);
                const analysis = analyzeSymbol(klines, symbol);
                const resultDiv = document.getElementById('result');
                const recommendedText = analysis.isRecommended ? ' (Disarankan)' : '';
                resultDiv.innerHTML = `
                    <div class="signal ${analysis.direction.toLowerCase()}">
                        <h3>Sinyal untuk ${analysis.symbol}${recommendedText}</h3>
                        <p><strong>Harga Saat Ini:</strong> $${analysis.currentPrice.toFixed(5)}</p>
                        <p><strong>Arah Harga:</strong> ${analysis.direction}</p>
                        <p><strong>Arahan Entry:</strong> ${analysis.entryDirection}</p>
                        <p><strong>Take Profit (TP):</strong> $${analysis.tp.toFixed(5)}</p>
                        <p><strong>Stop Loss (SL):</strong> $${analysis.sl.toFixed(5)}</p>
                        <p><strong>Perkiraan Waktu ke TP:</strong> ${analysis.estimatedTime}</p>
                        <p><strong>Leverage Terbaik (Saran):</strong> ${analysis.recommendedLeverage}x</p>
                        <p class="probability"><strong>Probabilitas Sinyal:</strong> ${analysis.probability}%</p>
                        <p style="color: #ffd700; grid-column: span 2;"><em>Catatan: Rasio TP:SL 1:2 untuk risiko terukur. Analisis akurat, tapi tetap estimasi.</em></p>
                    </div>
                `;
            } catch (e) {
                document.getElementById('result').innerHTML = `<p style="color: red;">Error: ${e.message}</p>`;
            }
        }
    </script>
</body>
                                             </html>

